# 80x86汇编

## 1.1 cpu的模式

- 实模式

  操作相当于一个可进行32位快速运算的8086

- 保护模式

  是80x86设计目标全部达到的工作模式，通过对程序使用的存储区采用分段、分页的存储管理机制，达到分级使用、互不干扰的保护目的。能为每个任务提供一台虚拟处理器，使每个任务单独执行，快速切换

- 虚拟8086模式

  保护模式下同时模拟多个8086处理器

**保护模式保护的是什么? **

​	分清不同任务使用的存储区域，不允许随便使用其他任务的数据和代码。

​	_必要条件:_

1. 要标记每段存储区域的所有者(进程）或被使用的权限级别
2. 要标记使用者是谁（进程）
3. 中间环节：CPU要去判断此次访问是否合法

## 1.2 内存访问

1. 在x86-32体系结构的保护模式下，一个内存地址是由段基地址、偏移地址两个要素构成的。

2. 每个段的描述(段描述符(长度为64位))由三个要素构成：

   **段基地址(32位):段长度(20位，段长度单位为2^12):访问权限**

3. **出于系统兼容原因，段寄存器只有16位，如何表示64位的段描述符?**

   - 通过描述符表：将段寄存器中的高13位值作为索引来访问该表，从而获得64位的段描述符。

4. GDT是全局描述符表，主要存放操作系统和各个任务公用的描述符

   公用的数据和代码段描述符、各任务的TTS描述符和LDT描述符

   ​	TTS是任务状态段，存放各个任务私有运行状态信息描述符

   GDT register(GDTR),48bit

5. LDT是局部描述符表，主要存放各个任务的私有描述符表（当前的任务有多少个LDT就有多少个）

6. 段寄存器:高13位用来指示描述符在描述符表中的索引号，低两位是表示使用描述符表的特权级别。

